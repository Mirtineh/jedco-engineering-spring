(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[8],{557:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(0);const s=()=>({cm_url:"/Engineering",um_url:"/Engineering",file_url:""})},561:function(e,t,n){"use strict";n.d(t,"i",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"n",(function(){return d})),n.d(t,"m",(function(){return u})),n.d(t,"e",(function(){return b})),n.d(t,"j",(function(){return j})),n.d(t,"d",(function(){return h})),n.d(t,"o",(function(){return m})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"l",(function(){return g})),n.d(t,"k",(function(){return x}));var s=n(557),r=n(563),c=n.n(r);const a=e=>{const t=Object(s.a)().um_url,n={headers:{Authorization:"Bearer ".concat(e)}};return c.a.get(t+"/UserRole/userRoleList",n).then((e=>e.data))},o=e=>{const t=Object(s.a)().um_url,n={headers:{Authorization:"Bearer ".concat(e)}};return c.a.get(t+"/UserAction/userActionList",n).then((e=>e.data))},i=(e,t)=>{const n=Object(s.a)().um_url,r={headers:{Authorization:"Bearer ".concat(e)}};return c.a.get(n+"/roleDefinition/definedRolesList?userRoleId="+t,r).then((e=>e.data))};function l(e,t){const n=Object(s.a)().um_url;return c()({method:"post",url:n+"/roleDefinition/defineRole",headers:{Authorization:"Bearer ".concat(e)},data:t}).then((e=>e.data))}function d(e,t){const n=Object(s.a)().um_url;return c()({method:"put",url:n+"/UserRole/updateUserRole",headers:{Authorization:"Bearer ".concat(e)},data:{id:t.id,name:t.name,description:t.description}}).then((e=>e.data))}function u(e,t){const n=Object(s.a)().um_url;return c()({method:"put",url:n+"/roleDefinition/updateDefinedActions",headers:{Authorization:"Bearer ".concat(e)},data:t}).then((e=>e.data))}function b(e,t){const n=Object(s.a)().um_url;return c()({method:"delete",url:n+"/roleDefinition/deleteUserRole?UserRoleID="+t,headers:{Authorization:"Bearer ".concat(e)}}).then((e=>e.data))}const j=e=>{const t=Object(s.a)().um_url,n={headers:{Authorization:"Bearer ".concat(e)}};return c.a.get(t+"/users/listUsers",n).then((e=>e.data))},h=(e,t)=>{const n=Object(s.a)().um_url;return c()({method:"post",url:n+"/users/registerUser",headers:{Authorization:"Bearer ".concat(e)},data:t}).then((e=>e.data))},m=(e,t)=>{const n=Object(s.a)().um_url;return c()({method:"put",url:n+"/users/updateUserProfile",headers:{Authorization:"Bearer ".concat(e)},data:t}).then((e=>e.data))},O=e=>{const t=Object(s.a)().um_url;return c.a.get(t+"/User/activationNumCheck?activationNO="+e).then((e=>e.data))},f=e=>{const t=Object(s.a)().um_url;return c()({method:"post",url:t+"/User/setUserNameAndPassword",data:e}).then((e=>e.data))};function p(e,t){const n=Object(s.a)().um_url;return c()({method:"delete",url:n+"/users/deleteUser?userId="+t,headers:{Authorization:"Bearer ".concat(e)}}).then((e=>e.data))}function g(e,t){const n=Object(s.a)().um_url;return c()({method:"put",url:n+"/users/suspendUser?userId="+t,headers:{Authorization:"Bearer ".concat(e)}}).then((e=>e.data))}function x(e,t){const n=Object(s.a)().um_url;return c()({method:"put",url:n+"/users/activateUser?userId="+t,headers:{Authorization:"Bearer ".concat(e)}}).then((e=>e.data))}},680:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),c=n(552),a=n(639),o=(n(638),n(681)),i=n(561),l=n(89),d=n(137),u=n(684),b=n(678),j=n(679),h=n(676),m=n(670),O=n(11);const f=r.a.forwardRef((function(e,t){return Object(O.jsx)(m.a,{direction:"up",ref:t,...e})})),p=[{key:"name",_classes:"font-weight-bold"},{key:"description",sorter:!1,filter:!1},"createdOn",{key:"role_details",label:"Details",sorter:!1,filter:!1},{key:"updates",label:"",sorter:!1,filter:!1},{key:"deletes",label:"",sorter:!1,filter:!1}];t.default=()=>{const[e,t]=r.a.useState(!1),[n,m]=Object(s.useState)([]),[g,x]=Object(s.useState)(!1),[N,k]=Object(s.useState)(""),[z,U]=Object(s.useState)(""),[y,v]=Object(s.useState)(""),[A,w]=Object(s.useState)(""),[C,D]=Object(s.useState)(""),[R,_]=Object(s.useState)([]),[S,M]=Object(s.useState)([]),[B,F]=Object(s.useState)(0),I=Object(l.b)(),P=()=>{Object(i.i)(I.login.token).then((e=>{m(e),console.log(e)})).catch((e=>console.log(e))),Object(i.g)(I.login.token).then((e=>{_(e)})).catch((e=>console.log(e)))};Object(s.useEffect)((()=>{P()}),[]);const Y=(e,t,n)=>{x(!g),k(e),v(t),U(t),D(n),""==e&&M([])};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(a.a,{}),Object(O.jsxs)(c.J,{show:g,onClose:()=>{Y("","","")},size:"lg",backdrop:!0,closeOnBackdrop:!1,children:[Object(O.jsx)(c.M,{size:"modal-lg",closeButton:!0,children:Object(O.jsxs)("h4",{children:[Object(O.jsx)("small",{children:0==N?"Create User Role":"Update User Role"})," - ",0==N?y:z]})}),Object(O.jsxs)(c.K,{children:[Object(O.jsx)("form",{onSubmit:e=>{e.preventDefault();const t={id:N,name:y,description:C};Object(i.n)(I.login.token,t).then((e=>{e.status?(d.NotificationManager.success(e.message,"Success",3e3),P(),U(y)):d.NotificationManager.error(e.message,"Update Failed!",3e3)})).catch((e=>{console.log(e),403==e.response.status?d.NotificationManager.error("You are not allowed to perform this task","Update Failed!",3e3):d.NotificationManager.error("Unable to try Role Update, check your connection","Update Failed!",3e3)}))},children:Object(O.jsxs)("div",{class:"form-row",children:[Object(O.jsx)("div",{class:"col-md-5 mb-3",children:Object(O.jsx)(o.a,{id:"outlined-basic",label:"Name",onInput:e=>v(e.target.value),value:y,size:"small",variant:"outlined",required:!0})}),Object(O.jsx)("div",{class:"col-md-5 mb-3",children:Object(O.jsx)(o.a,{id:"outlined-basic",label:"Description",multiline:!0,rows:3,onInput:e=>D(e.target.value),value:C,size:"small",variant:"outlined"})}),Object(O.jsx)("div",{class:"col-md-2 mb-3",children:0==N?"":Object(O.jsx)("button",{type:"submit",className:"btn btn-outline-success m-2 btn-md",children:"Update"})})]})}),Object(O.jsx)("hr",{}),Object(O.jsx)(c.M,{size:"modal-lg",children:Object(O.jsxs)("h4",{children:[Object(O.jsx)("small",{children:0==N?"Assign Actions for ":"Update Role Actions for "})," - ",0==N?y:z]})}),R.map(((e,t)=>Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{id:"accordion",children:Object(O.jsxs)(c.e,{className:"mb-0",children:[Object(O.jsx)(c.h,{id:"headingOne",children:Object(O.jsx)(c.d,{block:!0,color:"link",className:"text-left",children:Object(O.jsx)("h5",{className:"m-0 p-0",children:e.groupName})})}),Object(O.jsx)(c.j,{show:0===B,children:Object(O.jsx)(c.f,{children:Object(O.jsx)(c.e,{children:Object(O.jsx)(c.H,{children:e.actionsDtos.map((e=>{let t=!1;return S.includes(e.userActionId)&&(t=!0),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(c.I,{children:Object(O.jsxs)("div",{className:"d-flex justify-content-between",children:[e.action,Object(O.jsx)(c.Y,{className:"mx-1",color:"success",labelOn:"\u2713",labelOff:"\u2715",checked:t,onChange:()=>{(e=>{let t=S;new Promise(((n,s)=>{const r=t.indexOf(e);r>-1?t.splice(r,1):t.push(e),n()})).then((()=>{console.log("zzzzzzzzzzzzzzzzzzzz "+t),M(t)})),M([e])})(e.userActionId)}})]})})})}))})})})})]})})})))]}),Object(O.jsxs)("div",{className:"d-flex justify-content-between",children:[0==N?Object(O.jsx)("button",{type:"button",className:"btn btn-outline-danger m-2 btn-md",onClick:()=>{Y("","","")},children:"Cancel"}):Object(O.jsx)("button",{type:"button",className:"btn btn-outline-danger m-2 btn-md",onClick:()=>{Y("","","")},children:"Close"}),0==N?Object(O.jsx)("button",{className:"btn btn-outline-success m-2 btn-md",type:"submit",onClick:e=>{if(e.preventDefault(),""==y)a.b.error("Role Name Can not be empty!",{position:"top-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});else{const e={userRoleName:y,userRoleDescription:C,userActions:S};Object(i.c)(I.login.token,e).then((e=>{e.status?(d.NotificationManager.success(e.message,"Success",3e3),P(),Y("","","")):d.NotificationManager.error(e.message,"Update Failed!",3e3)})).catch((e=>{console.log(e),403==e.response.status?d.NotificationManager.error("You are not allowed to perform this task","Update Failed!",3e3):d.NotificationManager.error("Unable to try Update, check your connection","Update Failed!",3e3)}))}},children:"Submit"}):Object(O.jsx)("button",{className:"btn btn-outline-success m-2 btn-md",onClick:e=>{e.preventDefault();const t={userRoleId:N,userActions:S};Object(i.m)(I.login.token,t).then((e=>{e.status?(d.NotificationManager.success(e.message,"Success",3e3),P()):d.NotificationManager.error(e.message,"Update Failed!",3e3)})).catch((e=>{console.log(e),403==e.response.status?d.NotificationManager.error("You are not allowed to perform this task","Update Failed!",3e3):d.NotificationManager.error("Unable to try Update, check your connection","Update Failed!",3e3)}))},children:"Update"})]}),Object(O.jsx)(c.L,{})]}),Object(O.jsx)(c.O,{children:Object(O.jsx)(c.i,{xl:12,children:Object(O.jsxs)(c.e,{children:[Object(O.jsx)(c.h,{children:Object(O.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h4",{style:{marginBottom:2},children:"Roles"}),Object(O.jsx)("small",{className:"text-muted",children:" user roles"})]}),Object(O.jsx)("div",{className:"d-flex justify-content-end",children:Object(O.jsx)("button",{type:"button",className:"btn btn-outline-success m-2 btn-md",onClick:()=>{Y(0,"","")},children:"Add Role"})})]})}),Object(O.jsx)(c.f,{children:Object(O.jsx)(c.m,{items:n,fields:p,hover:!0,tableFilter:!0,striped:!0,itemsPerPage:5,itemsPerPageSelect:!0,clickableRows:!0,scopedSlots:{createdOn:e=>Object(O.jsx)("td",{children:new Date(parseFloat(e.createdOn)).toLocaleString()}),role_details:(e,t)=>Object(O.jsx)("td",{className:"py-2",children:Object(O.jsx)(c.d,{color:"primary",variant:"outline",shape:"square",size:"sm",children:"Detail"})}),updates:(e,t)=>Object(O.jsx)("td",{className:"py-2",children:Object(O.jsx)(c.d,{color:"warning",variant:"outline",shape:"square",size:"sm",disabled:"Admin"==e.name,onClick:()=>{(e=>{let t=[];new Promise(((n,s)=>{Object(i.h)(I.login.token,e.id).then((e=>{e[0].userActionList.forEach((function(e){t.push(e.id),console.log(e.id)})),n()})).catch((e=>console.log(e)))})).then((()=>{console.log(" pushed "+t),M(t),Y(e.id,e.name,e.description),console.log("role actions - - -"+t)}))})(e)},children:"Update"})}),deletes:(e,n)=>Object(O.jsx)("td",{className:"py-2",children:Object(O.jsx)(c.d,{color:"danger",variant:"outline",shape:"square",disabled:"Admin"==e.name,size:"sm",onClick:()=>(e=>{t(!0),w(e)})(e),children:"Delete"})})}})})]})})}),Object(O.jsx)("div",{children:Object(O.jsxs)(u.a,{open:e,TransitionComponent:f,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(O.jsx)(h.a,{id:"alert-dialog-slide-title",children:Object(O.jsx)("h5",{children:"Are You sure?"})}),Object(O.jsx)(b.a,{children:Object(O.jsx)(j.a,{id:"alert-dialog-slide-description",children:Object(O.jsxs)("div",{children:[Object(O.jsx)("h5",{style:{textAlign:"center"},children:Object(O.jsxs)("small",{children:["You are about to delete role ",Object(O.jsx)("strong",{children:A.name})]})}),Object(O.jsx)("h6",{style:{textAlign:"center"},children:" Are You sure you want to proceed?"})]})})}),Object(O.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(O.jsx)("button",{type:"button",className:"btn btn-outline-danger m-2 btn-sm",onClick:()=>{t(!1)},children:"Cancel"}),Object(O.jsx)("button",{className:"btn btn-outline-success m-2 btn-sm",type:"submit",onClick:e=>{var n,s;n=e,s=A.id,n.preventDefault(),Object(i.e)(I.login.token,s).then((e=>{e.status?(d.NotificationManager.success(e.message,"Success",3e3),P(),t(!1)):d.NotificationManager.error(e.message,"Delete Failed!",3e3)})).catch((e=>{console.log(e),403==e.response.status?d.NotificationManager.error("You are not allowed to perform this task","Delete Failed!",3e3):d.NotificationManager.error("Unable to try Delete, check your connection","Delete Failed!",3e3)}))},children:"Continue"})]})]})})]})}}}]);
//# sourceMappingURL=8.d9d36d18.chunk.js.map